<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#0ea5a4"/>
  <title>UniTimetable — Courses</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="container">
    <header class="topbar">
      <a href="index.html" class="brand">Home</a>
      <a href="add.html" class="btn primary">+ Add</a>
    </header>

    <section class="card">
      <h2>Course List</h2>
      <div id="course-list"></div>
      <p id="no-courses" class="muted">No units yet.</p>
    </section>
  </main>

  <script src="app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async ()=>{
      await appInit();
      renderCourses();
    });

    function renderCourses(){
      const out = document.getElementById('course-list');
      const unique = appGetUniqueUnits();
      out.innerHTML = '';
      if(unique.length === 0){
        document.getElementById('no-courses').style.display = 'block';
        return;
      } else document.getElementById('no-courses').style.display = 'none';

      unique.forEach(u=>{
        const el = document.createElement('div');
        el.className = 'course-row';
        el.innerHTML = `
          <div>
            <div class="class-title">${escapeHtml(u.unit)}</div>
            <div class="small-text">${escapeHtml(u.lecturer || 'No lecturer')} · ${u.count} class${u.count>1?'es':''}</div>
          </div>
          <div class="course-actions">
            <a class="btn small" href="timetable.html?unit=${encodeURIComponent(u.unit)}">View Classes</a>
            <a class="btn small" href="notes.html?unit=${encodeURIComponent(u.unit)}">Notes</a>
          </div>
        `;
        out.appendChild(el);
      });
    }
  </script>
</body>
</html>
